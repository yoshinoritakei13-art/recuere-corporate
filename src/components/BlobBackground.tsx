'use client';

import { useEffect, useRef, useState } from 'react';

interface BlobBackgroundProps {
  className?: string;
}

export default function BlobBackground({ className = '' }: BlobBackgroundProps) {
  const [isVisible, setIsVisible] = useState(false);
  const containerRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
        }
      },
      { threshold: 0.1 }
    );

    if (containerRef.current) {
      observer.observe(containerRef.current);
    }

    return () => observer.disconnect();
  }, []);

  return (
    <div
      ref={containerRef}
      className={`absolute inset-0 overflow-hidden pointer-events-none ${className}`}
    >
      {/* Blob 1 - 水色系（左上） */}
      <svg
        className={`absolute w-[800px] h-[800px] -left-[200px] -top-[100px] transition-opacity duration-1000 ${
          isVisible ? 'opacity-100' : 'opacity-0'
        }`}
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <linearGradient id="blobGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(127, 166, 191, 0.5)" />
            <stop offset="100%" stopColor="rgba(127, 166, 191, 0.1)" />
          </linearGradient>
        </defs>
        <path
          fill="url(#blobGrad1)"
          className="blob-morph-1"
        >
          <animate
            attributeName="d"
            dur="12s"
            repeatCount="indefinite"
            values="
              M43.1,-68.5C56.2,-58.6,67.5,-47.3,72.3,-33.9C77.2,-20.5,75.5,-4.9,74.2,11.3C72.9,27.6,71.9,44.5,63.8,57.2C55.7,69.8,40.6,78.2,25.5,79.2C10.4,80.1,-4.7,73.6,-20.9,69.6C-37.1,65.5,-54.5,63.9,-66,54.8C-77.5,45.8,-83.2,29.3,-85.7,12.3C-88.3,-4.8,-87.7,-22.3,-79.6,-34.8C-71.5,-47.3,-55.8,-54.9,-41.3,-64.2C-26.7,-73.6,-13.4,-84.7,0.8,-86C15,-87.2,29.9,-78.5,43.1,-68.5Z;
              M47.5,-73.2C60.9,-65.2,70.8,-51.3,76.1,-36.1C81.4,-20.9,82.1,-4.4,78.5,10.3C74.9,25,67,38,56.3,48.8C45.6,59.6,32.1,68.3,17.1,73.8C2.1,79.3,-14.4,81.7,-29.2,77.2C-44,72.7,-57.1,61.3,-66.1,47.4C-75.1,33.5,-80,17.1,-79.8,0.9C-79.6,-15.3,-74.3,-31.4,-64.5,-43.8C-54.7,-56.2,-40.4,-64.9,-25.8,-72.2C-11.2,-79.5,3.7,-85.4,18.8,-83.7C33.9,-82,47.1,-72.7,47.5,-73.2Z;
              M39.5,-62.8C52.3,-55.8,64.6,-46.1,71.2,-33.3C77.8,-20.5,78.7,-4.6,75.8,10.1C72.9,24.8,66.2,38.3,55.8,48.5C45.4,58.7,31.3,65.6,16.4,70.1C1.5,74.6,-14.2,76.7,-28.5,72.5C-42.8,68.3,-55.7,57.8,-64.8,44.7C-73.9,31.6,-79.2,15.8,-79.4,-0.1C-79.6,-16,-74.7,-32,-65.3,-44.4C-55.9,-56.8,-42,-65.6,-27.8,-71.8C-13.6,-78,0.9,-81.6,14.8,-79.4C28.7,-77.2,42,-69.2,39.5,-62.8Z;
              M43.1,-68.5C56.2,-58.6,67.5,-47.3,72.3,-33.9C77.2,-20.5,75.5,-4.9,74.2,11.3C72.9,27.6,71.9,44.5,63.8,57.2C55.7,69.8,40.6,78.2,25.5,79.2C10.4,80.1,-4.7,73.6,-20.9,69.6C-37.1,65.5,-54.5,63.9,-66,54.8C-77.5,45.8,-83.2,29.3,-85.7,12.3C-88.3,-4.8,-87.7,-22.3,-79.6,-34.8C-71.5,-47.3,-55.8,-54.9,-41.3,-64.2C-26.7,-73.6,-13.4,-84.7,0.8,-86C15,-87.2,29.9,-78.5,43.1,-68.5Z
            "
            calcMode="spline"
            keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
          />
        </path>
        <animateTransform
          attributeName="transform"
          type="translate"
          values="100 100; 105 95; 98 102; 100 100"
          dur="15s"
          repeatCount="indefinite"
          calcMode="spline"
          keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
        />
      </svg>

      {/* Blob 2 - ピンク系（右下） */}
      <svg
        className={`absolute w-[700px] h-[700px] -right-[150px] bottom-[-100px] transition-opacity duration-1000 delay-200 ${
          isVisible ? 'opacity-100' : 'opacity-0'
        }`}
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <linearGradient id="blobGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(255, 153, 255, 0.4)" />
            <stop offset="100%" stopColor="rgba(255, 153, 255, 0.1)" />
          </linearGradient>
        </defs>
        <path
          fill="url(#blobGrad2)"
          className="blob-morph-2"
        >
          <animate
            attributeName="d"
            dur="14s"
            repeatCount="indefinite"
            values="
              M45.3,-76.1C58.5,-67.5,68.8,-54.6,75.8,-40.1C82.8,-25.6,86.5,-9.4,84.5,5.8C82.5,21,74.8,35.3,64.7,47.7C54.6,60.1,42.1,70.7,27.8,76.5C13.5,82.3,-2.6,83.4,-18.4,79.9C-34.2,76.4,-49.6,68.4,-61.7,56.5C-73.8,44.6,-82.5,28.9,-84.8,12.3C-87.1,-4.3,-83,-21.8,-74.4,-36.1C-65.8,-50.4,-52.7,-61.5,-38.5,-69.5C-24.3,-77.5,-9.1,-82.4,4.3,-79.2C17.7,-76,32.1,-84.7,45.3,-76.1Z;
              M42.6,-71.8C54.3,-63.5,62.2,-50,69.2,-36C76.2,-22,82.3,-7.4,81.7,7C81.1,21.4,73.8,35.6,63.3,46.8C52.8,58,39.1,66.2,24.5,71.6C9.9,77,-5.6,79.6,-20.7,77.2C-35.8,74.8,-50.5,67.4,-61.7,55.9C-72.9,44.4,-80.6,28.8,-82.7,12.5C-84.8,-3.8,-81.3,-20.8,-73.2,-34.8C-65.1,-48.8,-52.4,-59.8,-38.6,-67.2C-24.8,-74.6,-9.9,-78.4,3.3,-76.8C16.5,-75.2,30.9,-80.1,42.6,-71.8Z;
              M47.8,-78.5C61.2,-70.2,71,-55.3,77.7,-39.5C84.4,-23.7,88,-7,85.8,8.7C83.6,24.4,75.6,39.1,64.5,51.3C53.4,63.5,39.2,73.2,23.8,78.5C8.4,83.8,-8.2,84.7,-23.6,80.4C-39,76.1,-53.2,66.6,-64.1,54C-75,41.4,-82.6,25.7,-84.5,9.3C-86.4,-7.1,-82.6,-24.2,-74.1,-38.3C-65.6,-52.4,-52.4,-63.5,-38.2,-71.4C-24,-79.3,-8.8,-84,4.5,-81.7C17.8,-79.4,34.4,-86.8,47.8,-78.5Z;
              M45.3,-76.1C58.5,-67.5,68.8,-54.6,75.8,-40.1C82.8,-25.6,86.5,-9.4,84.5,5.8C82.5,21,74.8,35.3,64.7,47.7C54.6,60.1,42.1,70.7,27.8,76.5C13.5,82.3,-2.6,83.4,-18.4,79.9C-34.2,76.4,-49.6,68.4,-61.7,56.5C-73.8,44.6,-82.5,28.9,-84.8,12.3C-87.1,-4.3,-83,-21.8,-74.4,-36.1C-65.8,-50.4,-52.7,-61.5,-38.5,-69.5C-24.3,-77.5,-9.1,-82.4,4.3,-79.2C17.7,-76,32.1,-84.7,45.3,-76.1Z
            "
            calcMode="spline"
            keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
          />
        </path>
        <animateTransform
          attributeName="transform"
          type="translate"
          values="100 100; 93 108; 107 97; 100 100"
          dur="18s"
          repeatCount="indefinite"
          calcMode="spline"
          keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
        />
      </svg>

      {/* Blob 3 - ゴールド系（中央上） */}
      <svg
        className={`absolute w-[600px] h-[600px] left-1/2 -translate-x-1/2 -top-[50px] transition-opacity duration-1000 delay-400 ${
          isVisible ? 'opacity-100' : 'opacity-0'
        }`}
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <linearGradient id="blobGrad3" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(230, 201, 120, 0.4)" />
            <stop offset="100%" stopColor="rgba(230, 201, 120, 0.1)" />
          </linearGradient>
        </defs>
        <path
          fill="url(#blobGrad3)"
          className="blob-morph-3"
        >
          <animate
            attributeName="d"
            dur="16s"
            repeatCount="indefinite"
            values="
              M38.2,-64.1C49.6,-56.2,59.2,-46,66.3,-33.7C73.4,-21.4,78,-7,77.1,7C76.2,21,69.8,34.6,60.3,45.8C50.8,57,38.2,65.8,24.3,71C10.4,76.2,-4.8,77.8,-19.7,75.1C-34.6,72.4,-49.2,65.4,-60.2,54.2C-71.2,43,-78.6,27.6,-80.5,11.5C-82.4,-4.6,-78.8,-21.4,-70.6,-35C-62.4,-48.6,-49.6,-59,-35.9,-65.5C-22.2,-72,-7.6,-74.6,4.4,-72.9C16.4,-71.2,26.8,-72,38.2,-64.1Z;
              M41.5,-68.3C53.5,-60.5,63.1,-48.5,70.2,-34.8C77.3,-21.1,81.9,-5.7,80.5,9C79.1,23.7,71.7,37.7,61,48.9C50.3,60.1,36.3,68.5,21.4,73.1C6.5,77.7,-9.3,78.5,-24.4,74.8C-39.5,71.1,-53.9,63,-64.1,51C-74.3,39,-80.3,23.1,-81.3,6.9C-82.3,-9.3,-78.3,-25.8,-69.8,-39.2C-61.3,-52.6,-48.3,-62.9,-34.5,-69.8C-20.7,-76.7,-6.1,-80.2,6.1,-78.4C18.3,-76.6,29.5,-76.1,41.5,-68.3Z;
              M44.8,-74C57.6,-66,67.3,-52.4,73.8,-37.6C80.3,-22.8,83.6,-6.8,81.9,8.4C80.2,23.6,73.5,38,63.2,49.7C52.9,61.4,39,70.4,24.1,75.3C9.2,80.2,-6.7,81,-22.1,77.5C-37.5,74,-52.4,66.2,-63.1,54.3C-73.8,42.4,-80.3,26.4,-81.8,10C-83.3,-6.4,-79.8,-23.2,-71.5,-37C-63.2,-50.8,-50.1,-61.6,-36.2,-69.1C-22.3,-76.6,-7.6,-80.8,5.3,-79.6C18.2,-78.4,32,-82,44.8,-74Z;
              M38.2,-64.1C49.6,-56.2,59.2,-46,66.3,-33.7C73.4,-21.4,78,-7,77.1,7C76.2,21,69.8,34.6,60.3,45.8C50.8,57,38.2,65.8,24.3,71C10.4,76.2,-4.8,77.8,-19.7,75.1C-34.6,72.4,-49.2,65.4,-60.2,54.2C-71.2,43,-78.6,27.6,-80.5,11.5C-82.4,-4.6,-78.8,-21.4,-70.6,-35C-62.4,-48.6,-49.6,-59,-35.9,-65.5C-22.2,-72,-7.6,-74.6,4.4,-72.9C16.4,-71.2,26.8,-72,38.2,-64.1Z
            "
            calcMode="spline"
            keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
          />
        </path>
        <animateTransform
          attributeName="transform"
          type="translate"
          values="100 100; 97 105; 103 98; 100 100"
          dur="20s"
          repeatCount="indefinite"
          calcMode="spline"
          keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
        />
      </svg>

      {/* Blob 4 - 水色系（右上、小さめ） */}
      <svg
        className={`absolute w-[400px] h-[400px] right-[10%] top-[20%] transition-opacity duration-1000 delay-300 ${
          isVisible ? 'opacity-100' : 'opacity-0'
        }`}
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <radialGradient id="blobGrad4" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stopColor="rgba(0, 69, 130, 0.25)" />
            <stop offset="100%" stopColor="rgba(0, 69, 130, 0.05)" />
          </radialGradient>
        </defs>
        <path
          fill="url(#blobGrad4)"
          className="blob-morph-4"
        >
          <animate
            attributeName="d"
            dur="10s"
            repeatCount="indefinite"
            values="
              M47.5,-73.2C60.9,-65.2,70.8,-51.3,76.1,-36.1C81.4,-20.9,82.1,-4.4,78.5,10.3C74.9,25,67,38,56.3,48.8C45.6,59.6,32.1,68.3,17.1,73.8C2.1,79.3,-14.4,81.7,-29.2,77.2C-44,72.7,-57.1,61.3,-66.1,47.4C-75.1,33.5,-80,17.1,-79.8,0.9C-79.6,-15.3,-74.3,-31.4,-64.5,-43.8C-54.7,-56.2,-40.4,-64.9,-25.8,-72.2C-11.2,-79.5,3.7,-85.4,18.8,-83.7C33.9,-82,47.1,-72.7,47.5,-73.2Z;
              M43.1,-68.5C56.2,-58.6,67.5,-47.3,72.3,-33.9C77.2,-20.5,75.5,-4.9,74.2,11.3C72.9,27.6,71.9,44.5,63.8,57.2C55.7,69.8,40.6,78.2,25.5,79.2C10.4,80.1,-4.7,73.6,-20.9,69.6C-37.1,65.5,-54.5,63.9,-66,54.8C-77.5,45.8,-83.2,29.3,-85.7,12.3C-88.3,-4.8,-87.7,-22.3,-79.6,-34.8C-71.5,-47.3,-55.8,-54.9,-41.3,-64.2C-26.7,-73.6,-13.4,-84.7,0.8,-86C15,-87.2,29.9,-78.5,43.1,-68.5Z;
              M39.5,-62.8C52.3,-55.8,64.6,-46.1,71.2,-33.3C77.8,-20.5,78.7,-4.6,75.8,10.1C72.9,24.8,66.2,38.3,55.8,48.5C45.4,58.7,31.3,65.6,16.4,70.1C1.5,74.6,-14.2,76.7,-28.5,72.5C-42.8,68.3,-55.7,57.8,-64.8,44.7C-73.9,31.6,-79.2,15.8,-79.4,-0.1C-79.6,-16,-74.7,-32,-65.3,-44.4C-55.9,-56.8,-42,-65.6,-27.8,-71.8C-13.6,-78,0.9,-81.6,14.8,-79.4C28.7,-77.2,42,-69.2,39.5,-62.8Z;
              M47.5,-73.2C60.9,-65.2,70.8,-51.3,76.1,-36.1C81.4,-20.9,82.1,-4.4,78.5,10.3C74.9,25,67,38,56.3,48.8C45.6,59.6,32.1,68.3,17.1,73.8C2.1,79.3,-14.4,81.7,-29.2,77.2C-44,72.7,-57.1,61.3,-66.1,47.4C-75.1,33.5,-80,17.1,-79.8,0.9C-79.6,-15.3,-74.3,-31.4,-64.5,-43.8C-54.7,-56.2,-40.4,-64.9,-25.8,-72.2C-11.2,-79.5,3.7,-85.4,18.8,-83.7C33.9,-82,47.1,-72.7,47.5,-73.2Z
            "
            calcMode="spline"
            keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
          />
        </path>
        <animateTransform
          attributeName="transform"
          type="translate"
          values="100 100; 105 95; 95 105; 100 100"
          dur="12s"
          repeatCount="indefinite"
          calcMode="spline"
          keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
        />
      </svg>

      {/* Blob 5 - ピンク系（左下、小さめ） */}
      <svg
        className={`absolute w-[350px] h-[350px] left-[5%] bottom-[15%] transition-opacity duration-1000 delay-500 ${
          isVisible ? 'opacity-100' : 'opacity-0'
        }`}
        viewBox="0 0 200 200"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <radialGradient id="blobGrad5" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stopColor="rgba(255, 153, 255, 0.3)" />
            <stop offset="100%" stopColor="rgba(255, 153, 255, 0.05)" />
          </radialGradient>
        </defs>
        <path
          fill="url(#blobGrad5)"
          className="blob-morph-5"
        >
          <animate
            attributeName="d"
            dur="11s"
            repeatCount="indefinite"
            values="
              M39.5,-62.8C52.3,-55.8,64.6,-46.1,71.2,-33.3C77.8,-20.5,78.7,-4.6,75.8,10.1C72.9,24.8,66.2,38.3,55.8,48.5C45.4,58.7,31.3,65.6,16.4,70.1C1.5,74.6,-14.2,76.7,-28.5,72.5C-42.8,68.3,-55.7,57.8,-64.8,44.7C-73.9,31.6,-79.2,15.8,-79.4,-0.1C-79.6,-16,-74.7,-32,-65.3,-44.4C-55.9,-56.8,-42,-65.6,-27.8,-71.8C-13.6,-78,0.9,-81.6,14.8,-79.4C28.7,-77.2,42,-69.2,39.5,-62.8Z;
              M47.5,-73.2C60.9,-65.2,70.8,-51.3,76.1,-36.1C81.4,-20.9,82.1,-4.4,78.5,10.3C74.9,25,67,38,56.3,48.8C45.6,59.6,32.1,68.3,17.1,73.8C2.1,79.3,-14.4,81.7,-29.2,77.2C-44,72.7,-57.1,61.3,-66.1,47.4C-75.1,33.5,-80,17.1,-79.8,0.9C-79.6,-15.3,-74.3,-31.4,-64.5,-43.8C-54.7,-56.2,-40.4,-64.9,-25.8,-72.2C-11.2,-79.5,3.7,-85.4,18.8,-83.7C33.9,-82,47.1,-72.7,47.5,-73.2Z;
              M43.1,-68.5C56.2,-58.6,67.5,-47.3,72.3,-33.9C77.2,-20.5,75.5,-4.9,74.2,11.3C72.9,27.6,71.9,44.5,63.8,57.2C55.7,69.8,40.6,78.2,25.5,79.2C10.4,80.1,-4.7,73.6,-20.9,69.6C-37.1,65.5,-54.5,63.9,-66,54.8C-77.5,45.8,-83.2,29.3,-85.7,12.3C-88.3,-4.8,-87.7,-22.3,-79.6,-34.8C-71.5,-47.3,-55.8,-54.9,-41.3,-64.2C-26.7,-73.6,-13.4,-84.7,0.8,-86C15,-87.2,29.9,-78.5,43.1,-68.5Z;
              M39.5,-62.8C52.3,-55.8,64.6,-46.1,71.2,-33.3C77.8,-20.5,78.7,-4.6,75.8,10.1C72.9,24.8,66.2,38.3,55.8,48.5C45.4,58.7,31.3,65.6,16.4,70.1C1.5,74.6,-14.2,76.7,-28.5,72.5C-42.8,68.3,-55.7,57.8,-64.8,44.7C-73.9,31.6,-79.2,15.8,-79.4,-0.1C-79.6,-16,-74.7,-32,-65.3,-44.4C-55.9,-56.8,-42,-65.6,-27.8,-71.8C-13.6,-78,0.9,-81.6,14.8,-79.4C28.7,-77.2,42,-69.2,39.5,-62.8Z
            "
            calcMode="spline"
            keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
          />
        </path>
        <animateTransform
          attributeName="transform"
          type="translate"
          values="100 100; 92 102; 108 98; 100 100"
          dur="14s"
          repeatCount="indefinite"
          calcMode="spline"
          keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
        />
      </svg>
    </div>
  );
}
